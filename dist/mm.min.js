!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("es6-promise/auto"),require("vue"),require("vuex"),require("axios"));else if("function"==typeof define&&define.amd)define(["es6-promise/auto","vue","vuex","axios"],t);else{var n="object"==typeof exports?t(require("es6-promise/auto"),require("vue"),require("vuex"),require("axios")):t(e["es6-promise/auto"],e.vue,e.vuex,e.axios);for(var i in n)("object"==typeof exports?exports:e)[i]=n[i]}}("undefined"!=typeof self?self:this,function(e,t,n,i){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s=11)}([function(e,t){e.exports=function(e,t,n,i,r,a){var o,s=e=e||{},l=typeof e.default;"object"!==l&&"function"!==l||(o=e,s=e.default);var u="function"==typeof s?s.options:s;t&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0),n&&(u.functional=!0),r&&(u._scopeId=r);var c;if(a?(c=function(e){e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,e||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),i&&i.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(a)},u._ssrRegister=c):i&&(c=i),c){var f=u.functional,d=f?u.render:u.beforeCreate;f?(u._injectStyles=c,u.render=function(e,t){return c.call(t),d(e,t)}):u.beforeCreate=d?[].concat(d,c):[c]}return{esModule:o,exports:s,options:u}}},function(e,t){e.exports=n},function(e,n){e.exports=t},function(e,t,n){"use strict";var i=n(2),r=n.n(i),a=n(1),o=n.n(a),s=n(15),l=n(31),u=n(32),c=n(10),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};r.a.use(o.a);var d={basePath:"",path:"",api:{baseUrl:null,listUrl:null,downloadUrl:null,uploadUrl:null,options:{}},input:"",multipleSelection:!1,onCreated:null,onMounted:null,onSelect:null,showBreadcrumb:!0,height:null,vue:r.a,asVueComponent:!1,accept:""};t.a={components:{MediaManager:s.a},props:["id","opts"],data:function(){return{store$:null}},watch:{opts:{deep:!0,handler:function(){var e=this;this.options=f({},d,this.opts),this.store$.commit("resetSelected"),this.options.selected&&(Array.isArray(this.options.selected)?this.options.selected.forEach(function(t){e.select(t)}):this.select(this.options.selected))}}},created:function(){this.options=f({},d,this.opts),this.api=new l.a(this.options.api),this.options.onCreated&&this.options.onCreated({vc:this}),this._input=null},computed:{overrideOptions:function(){return f({},d,this.options)},input:function(){return!this._input&&this.options.input&&(this._input=document.querySelector(this.options.input)),this._input}},methods:{onSelect:function(e){if(this.input)if(e.selected)if(this.options.multipleSelection){var t=e.selected.map(function(e){return e.path});this.input.value=t.join("\n")}else this.input.value=e.selected.path;else this.input.value="";this.options.onSelect&&this.options.onSelect(e)},select:function(e){this.store$.commit("addSelected",e)},deselect:function(e){this.store$.commit("removeSelected",e)},setPath:function(e){this.store$.commit("setPath",e),this.$emit("setpath",e)},globalStore:function(){return c.a}},mounted:function(){var e=this;this.options.onMounted&&this.options.onMounted({el:this.$el,vc:this});var t=new o.a.Store(u.a.create(this,this.options));this.store$=t;var n=this.$refs.mediaManager;new r.a({el:n,store:t,render:function(t){return t(s.a,{props:{id:e.id,api:e.api,parent:e}})}})}}},function(e,t,n){"use strict";var i=n(1),r=(n.n(i),n(17)),a=n(20),o=n(26),s=n(29),l=n(10),u=function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.a={props:["api","id","parent"],components:{MediasWidget:a.a,UploadWidget:r.a,NotificationWidget:o.a},data:function(){return{path:this.$store.state.options.initialPath||this.$store.state.options.basePath,file:{}}},computed:c({},Object(i.mapState)({options:function(e){return e.options},basePath:function(e){return e.options.basePath}}),{relPath:function(){return this.path.replace(this.basePath,"")},breadcrumb:function(){var e=this.relPath.split("/"),t=[],n="";t.push({label:'<i class="fa fa-fw fa-home"></i>',path:this.basePath});for(var i=0;i<e.length;i++)e[i]&&(n+=e[i]+"/",t.push({label:e[i],path:this.basePath+n.replace(/\/$/,"")}));return t},uploadsInPath:function(){return l.a.getters.uploading(this.path)}}),created:function(){},mounted:function(){var e=this;this.parent.$on("setpath",function(t){e.path=t,e.$refs.medias.refresh()})},methods:{selectFile:function(e){this.$store.commit("addSelected",e)},unselectFile:function(e){this.$store.commit("removeSelected",e)},fileUploaded:function(e){var t=this.isSelected(e);this.$store.commit("fileUploaded",e),t&&this.options.onSelect instanceof Function&&this.options.onSelect({selected:this.$store.getters.selected()})},isSelected:function(e){return this.$store.getters.isSelected(e)},onUploadSuccess:function(){this.$refs.medias.refresh()},onUploadError:function(e){},deleteFile:function(e){var t=this;if(this.options.api.deleteUrl){var n=void 0;n=this.options.confirmDeletion instanceof Function?this.options.confirmDeletion(e):window.confirm("Are you sure to remove file "+e.basename+"?")?Promise.resolve():Promise.reject(),n.then(function(){t.api.delete(e).then(function(){t.$store.commit("removeSelected",e),t.$refs.medias.$emit("fileDeleted",e)},function(n){t.options.onError instanceof Function&&t.options.onError(n,"delete",e)})},function(){})}},renameFile:function(e){var t=this,n=void 0;return this.options.api.renameUrl&&(this.options.askNewName instanceof Function?n=this.options.askNewName(e):(n=(window.prompt("Type the new name for "+e.basename,e.basename)||"").trim())||(n=Promise.reject())),Promise.all([n]).then(function(n){var i=u(n,1),r=i[0];return r!==e.basename?t.api.rename(e,r).then(function(n){var i=n.data;t.$store.commit("renameSelected",{file:e,newFile:i}),t.$refs.medias.$emit("fileRenamed",e,i)},function(n){return t.options.onError instanceof Function&&t.options.onError(n,"rename",e,r),Promise.reject(n)}):Promise.reject()})},createFolderIn:function(e){var t=this,n=void 0;return this.options.api.createFolderUrl&&(this.options.askFolderName instanceof Function?n=this.options.askFolderName(e):(n=window.prompt("Type the name of the new folder"))||(n=Promise.reject())),Promise.all([n]).then(function(n){var i=u(n,1),r=i[0];return t.api.createFolderIn(e,r)})},checkFile:function(e){if(this.options.accept){if(this.options.accept instanceof Function)return this.options.accept(e);var t=[];"string"==typeof this.options.accept?t=[this.options.accept]:Array.isArray(this.options.accept)&&(t=this.options.accept);for(var n in t){var i=t[n];if(new RegExp("^"+i.replace("*",".*").replace("/","\\/")+"$","i").test(e.mime))return!0}return!1}return!0},removeUpload:function(e){return l.a.dispatch("removeUpload",e)},startUpload:function(e){return l.a.dispatch("startUpload",e)},updateUpload:function(e,t){return l.a.dispatch("updateUpload",{file:e,info:t})},faIconClass:function(e){return s.a.getFaIconClass(e)}}}},function(e,t,n){"use strict";var i=n(1),r=(n.n(i),n(6));n.n(r);t.a={data:function(){return{advancedUpload:!1,dragOver:!1}},props:["path"],computed:{mmc:function(){return this.$parent},api:function(){return this.mmc.api},fileInputId:function(){return this.mmc.id+"-file-input"}},mounted:function(){this.advancedUpload=this.isAdvancedUpload()},methods:{isAdvancedUpload:function(){var e=document.createElement("div");return("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FormData"in window&&"FileReader"in window},onDrop:function(e){this.dragOver=!1,this.files=[],e.dataTransfer.files?e.dataTransfer.files.length>0?(this.files=e.dataTransfer.files,this.submit()):toastr.error("Empty file list.","Error"):toastr.error("Drop error.","Error")},onSubmit:function(){this.$refs.fileInput.files&&(this.files=this.$refs.fileInput.files,this.submit(),this.$refs.form.reset())},submit:function(){for(var e=this,t=[],n=0;n<this.files.length;n++){var i=this.files[n];i.index=n;var r={uploading:!0,name:i.name,type:i.type,loaded:0,total:Math.max(100,i.size),success:!1,error:!1,uploadPath:this.path};i.type?t.push(this.buildRequest(i,r)):this.mmc.updateUpload(r,{loaded:r.total,error:"Invalid file."})}t.length&&t.forEach(function(t){t.then(function(t){e.$emit("upload-success",t)},function(t){e.$emit("upload-error",t)})})},buildRequest:function(e,t){var n=this;if(-1!=e.type.indexOf("image/")){var i=new FileReader;i.onload=function(e){n.mmc.updateUpload(t,{thumb:e.target.result})},i.readAsDataURL(e)}var r=new FormData;return r.append("path",this.path),r.append("file",e),t.promise=this.api.upload(r,{onUploadProgress:function(e){n.mmc.updateUpload(t,{loaded:e.loaded,total:e.total})}},t).then(function(e){return n.mmc.fileUploaded(t),n.mmc.updateUpload(t,{success:!0}),n.mmc.removeUpload(t),t},function(i){var r="";if(i.response&&i.response.data&&Array.isArray(i.response.data))for(var a=i.response.data,o=0;o<a.length;o++)r+=a[o].message||a[o];else r=i.message||i;return n.mmc.updateUpload(t,{error:r}),Promise.reject({file:e,error:r})}),this.mmc.startUpload(t),t.promise}}}},function(e,t){e.exports=i},function(e,t,n){"use strict";var i=n(1),r=(n.n(i),n(22)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.a={components:{MediaWidget:r.a},data:function(){return{files:[],loading:!1,error:!1,contextMenuFile:{},contextMenuX:0,contextMenuY:0,showContextMenu:!1}},props:["path","uploads"],computed:a({},Object(i.mapState)({basePath:function(e){return e.options.basePath}}),{mmc:function(){return this.$parent},api:function(){return this.mmc.api},relPath:function(){return this.path.replace(this.basePath,"")},canCreateFolder:function(){return this.mmc.options.api.createFolderUrl},pathUp:function(){var e="",t=this.relPath.lastIndexOf("/");return t>-1&&(e=this.relPath.slice(0,t)),this.basePath+e},contextMenuStyle:function(){return"left: "+this.contextMenuX+"px; top:"+this.contextMenuY+"px;"}}),watch:{path:function(){this.refresh()}},mounted:function(){var e=this;this.refresh(),this.$on("fileDeleted",function(t){var n=e.files.indexOf(t);-1!==n&&e.files.splice(n,1)}),this.$on("fileRenamed",function(e,t){Object.assign(e,t)})},destroyed:function(){this.$off("fileDeleted"),this.$off("fileRenamed")},methods:{createFolder:function(){var e=this;this.mmc.createFolderIn(this.path).then(function(){e.refresh()},function(){})},refresh:function(){var e=this;this.loading=!0,this.error=!1,this.api.list(this.path).then(function(t){Array.isArray(t.data)&&(t.data.sort(function(e,t){var n=e.type+"/"+e.basename,i=t.type+"/"+t.basename;return n.localeCompare(i)}),e.files=t.data),e.loading=!1},function(t){e.error=t.toString(),e.files=[],e.loading=!1})},browse:function(e){this.mmc.path=e},onMediaClick:function(e){if("dir"==e.type)this.browse(e.path);else{var t=this.mmc;t.isSelected(e)?t.unselectFile(e):t.checkFile(e)&&t.selectFile(e)}},onDocumentClick:function(e){this.toggleContextMenuOff()},onContextMenu:function(e,t){var n=this.mmc.$el.getBoundingClientRect();this.contextMenuFile=e,this.contextMenuX=t.clientX-n.left,this.contextMenuY=t.clientY-n.top,this.toggleContextMenuOn()},toggleContextMenuOn:function(){this.showContextMenu=!0,document.addEventListener("click",this.onDocumentClick)},toggleContextMenuOff:function(){this.contextMenuFile={},this.contextMenuX=0,this.contextMenuY=0,this.showContextMenu=!1,document.removeEventListener("click",this.onDocumentClick)}}}},function(e,t,n){"use strict";var i=n(1);n.n(i);t.a={props:["file"],computed:{mmc:function(){return this.$parent.$parent},selected:function(){return this.mmc.isSelected(this.file)},canDelete:function(){return this.mmc.options.api.deleteUrl},canRename:function(){return this.mmc.options.api.renameUrl},uploadPercentage:function(){return Math.round(this.file.loaded/this.file.total*100)},isAnUpload:function(){return void 0!==this.file.abort},filename:function(){return this.file.basename||this.file.name}},methods:{deleteFile:function(e){this.mmc.deleteFile(e)},renameFile:function(e){this.mmc.renameFile(e)},abortUpload:function(e){e.abort(),this.mmc.removeUpload(e)}}}},function(e,t,n){"use strict";t.a={components:{},data:function(){return{}},props:[],computed:{},watch:{},created:function(){},mounted:function(){},methods:{}}},function(e,t,n){"use strict";function i(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)})}var r=n(2),a=n.n(r),o=n(1),s=n.n(o);a.a.use(s.a),t.a=new s.a.Store({state:{uploading:[]},mutations:{startUpload:function(e,t){t.uuid=i(),e.uploading.push(t)},updateUpload:function(e,t){var n=t.file,i=t.info,r=e.uploading.find(function(e){return n.path&&e.path===n.path||n.uuid&&e.uuid===n.uuid});r&&Object.assign(r,i)},removeUpload:function(e,t){var n=e.uploading.findIndex(function(e){return t.path&&e.path===t.path||t.uuid&&e.uuid===t.uuid});-1!==n&&(delete t.uploading,delete t.loaded,delete t.total,delete t.success,delete t.error,delete t.uploadPath,delete t.uuid,delete t.abort,e.uploading.splice(n,1))}},getters:{isUploading:function(e,t){return function(t){return!!e.uploading.find(function(e){return t.path&&e.path===t.path||t.uuid&&e.uuid===t.uuid})}},uploadingProgress:function(e,t){return function(t){var n=e.uploading.find(function(e){return t.path&&e.path===t.path||t.uuid&&e.uuid===t.uuid});return n&&100*n.loaded/n.total||0}},uploading:function(e,t){return function(t){return e.uploading.filter(function(e){return e.uploadPath===t})}},donePromise:function(e,t){return function(t){var n=e.uploading.find(function(e){return t.path&&e.path===t.path||t.uuid&&e.uuid===t.uuid});return n&&n.promise||Promise.reject()}}},actions:{startUpload:function(e,t){e.dispatch;(0,e.commit)("startUpload",t)},updateUpload:function(e,t){e.dispatch;(0,e.commit)("updateUpload",{file:t.file,info:t.info})},removeUpload:function(e,t){e.dispatch;(0,e.commit)("removeUpload",t)}}})},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MM",function(){return u});var r=n(12),a=(n.n(r),n(2)),o=n.n(a),s=n(13),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){i(this,e),this.options=t,this.init()}return l(e,null,[{key:"install",value:function(e,t){e.component("VueMediaManager",s.a)}}]),l(e,[{key:"init",value:function(){var e=this,t=document.querySelector(this.options.el);this.vm=new o.a({el:this.options.el,render:function(n){return n(s.a,{props:{id:t.id,opts:e.options}})}})}},{key:"destroy",value:function(){this.vm.$destroy(),this.vm.$el.innerHTML=""}}]),e}()},function(t,n){t.exports=e},function(e,t,n){"use strict";function i(e){n(14)}var r=n(3),a=n(33),o=n(0),s=i,l=o(r.a,a.a,!1,s,null,null);t.a=l.exports},function(e,t){},function(e,t,n){"use strict";function i(e){n(16)}var r=n(4),a=n(30),o=n(0),s=i,l=o(r.a,a.a,!1,s,null,null);t.a=l.exports},function(e,t){},function(e,t,n){"use strict";function i(e){n(18)}var r=n(5),a=n(19),o=n(0),s=i,l=o(r.a,a.a,!1,s,null,null);t.a=l.exports},function(e,t){},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"upload-widget"},[e.advancedUpload?[n("div",{staticClass:"upload-drop-zone",class:{"drag-over":e.dragOver}},[n("form",{ref:"form",staticClass:"animated fadeIn",attrs:{method:"post",enctype:"multipart/form-data"},on:{dragover:function(t){t.preventDefault(),e.dragOver=!0},dragenter:function(t){t.preventDefault(),e.dragOver=!0},dragleave:function(t){t.preventDefault(),e.dragOver=!1},dragend:function(t){t.preventDefault(),e.dragOver=!1},drop:function(t){return t.preventDefault(),e.onDrop(t)},submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[n("svg",{staticClass:"upload-widget-icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"43",viewBox:"0 0 50 43"}},[n("path",{attrs:{d:"M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"}})]),e._v(" "),n("label",{attrs:{for:e.fileInputId}},[n("strong",[e._v("Scegli un file")]),e._v(" \n          "),n("span",[e._v("o trascinalo qui")]),e._v(".\n        ")]),e._v(" "),n("input",{ref:"fileInput",attrs:{id:e.fileInputId,type:"file",name:"files[]",multiple:""},on:{change:e.onSubmit}})])])]:[n("div",{staticClass:"alert alert-warning"},[e._v("Your browser does not support drag & drop file upload.")])]],2)},r=[],a={render:i,staticRenderFns:r};t.a=a},function(e,t,n){"use strict";function i(e){n(21)}var r=n(7),a=n(25),o=n(0),s=i,l=o(r.a,a.a,!1,s,null,null);t.a=l.exports},function(e,t){},function(e,t,n){"use strict";function i(e){n(23)}var r=n(8),a=n(24),o=n(0),s=i,l=o(r.a,a.a,!1,s,null,null);t.a=l.exports},function(e,t){},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file",class:{selected:e.selected,interrupted:e.file.error}},[n("div",{staticClass:"file-preview"},[e.file.thumb&&!e.file.error?[n("img",{staticClass:"thumb",attrs:{src:e.file.thumb}})]:"dir"==e.file.type?[e._m(0)]:e.file.error?[e._m(1)]:[n("div",{staticClass:"icon"},[n("i",{class:e.mmc.faIconClass(e.file)})])],e._v(" "),e.isAnUpload?n("div",{staticClass:"progress"},[n("div",{staticClass:"bar",style:{width:e.uploadPercentage+"%"}})]):e._e()],2),e._v(" "),n("div",{staticClass:"file-title",attrs:{title:e.filename}},[n("h3",[e._v(e._s(e.filename))])]),e._v(" "),e.isAnUpload?n("div",{staticClass:"top right actions"},[n("button",{staticClass:"btn btn-default",on:{click:function(t){return t.stopPropagation(),e.abortUpload(e.file)}}},[n("i",{staticClass:"fa fa-fw fa-times"})])]):e.canDelete?n("div",{staticClass:"top right actions"},[n("button",{staticClass:"btn btn-default",on:{click:function(t){return t.stopPropagation(),e.deleteFile(e.file)}}},[n("i",{staticClass:"fa fa-fw fa-trash"})])]):e._e(),e._v(" "),!e.isAnUpload&&e.canRename?n("div",{staticClass:"top left actions"},[n("button",{staticClass:"btn btn-default",on:{click:function(t){return t.stopPropagation(),e.renameFile(e.file)}}},[n("i",{staticClass:"fa fa-fw fa-pencil"})])]):e._e()])},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon"},[n("i",{staticClass:"fa fa-fw fa-folder"})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"icon"},[n("i",{staticClass:"fas fa-frown"})])}],a={render:i,staticRenderFns:r};t.a=a},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"medias-widget clearfix"},[e.error?[n("div",{staticClass:"alert alert-warning animated fadeIn"},[e._v("\n            "+e._s(e.error)+"\n            "),n("p",[n("button",{staticClass:"btn btn-primary",on:{click:function(t){return t.preventDefault(),e.refresh()}}},[n("i",{staticClass:"fa fa-fw fa-refresh"}),e._v(" Click here to retry")])])])]:[n("div",{staticClass:"medias clearfix"},[e.loading?[e._m(0)]:[e.relPath?n("div",{staticClass:"file animated fadeIn",on:{click:function(t){return e.browse(e.pathUp)}}},[e._m(1)]):e._e(),e._v(" "),e.canCreateFolder&&!e.loading?n("div",{staticClass:"file animated fadeIn",on:{click:function(t){return e.createFolder()}}},[e._m(2)]):e._e(),e._v(" "),e._l(e.files,function(t){return n("media-widget",{key:t.path,staticClass:"animated fadeIn",class:{invalid:"dir"!==t.type&&!e.mmc.checkFile(t)},attrs:{file:t},nativeOn:{click:function(n){return e.onMediaClick(t)},contextmenu:function(n){return n.preventDefault(),e.onContextMenu(t,n)}}})}),e._v(" "),e._l(e.uploads,function(t){return n("media-widget",{key:t.uuid,staticClass:"animated fadeIn",attrs:{file:t},nativeOn:{click:function(n){return e.onMediaClick(t)}}})})]],2),e._v(" "),n("transition",{attrs:{"enter-active-class":"animated fadeIn","leave-active-class":"animated fadeOut"}},[e.showContextMenu?n("div",{staticClass:"context-menu",style:e.contextMenuStyle},["dir"==e.contextMenuFile.type?n("ul",[n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.onMediaClick(e.contextMenuFile)}}},[n("i",{staticClass:"fa fa-fw fa-folder-open"}),e._v(" Open")])])]):n("ul",[e.mmc.isSelected(e.contextMenuFile)?n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.mmc.unselectFile(e.contextMenuFile)}}},[n("i",{staticClass:"fa fa-fw fa-times"}),e._v(" Unselect")])]):n("li",[n("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.mmc.selectFile(e.contextMenuFile)}}},[n("i",{staticClass:"fa fa-fw fa-check"}),e._v(" Select")])])])]):e._e()])]],2)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file animated fadeIn"},[n("div",{staticClass:"file-preview"},[n("div",{staticClass:"icon"},[n("i",{staticClass:"fa fa-fw fa-spin fa-sync"})])])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-preview"},[n("div",{staticClass:"icon"},[n("i",{staticClass:"fa fa-fw fa-backward"})])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"file-preview"},[n("div",{staticClass:"icon"},[n("i",{staticClass:"fas fa-fw fa-folder-plus"})])])}],a={render:i,staticRenderFns:r};t.a=a},function(e,t,n){"use strict";function i(e){n(27)}var r=n(9),a=n(28),o=n(0),s=i,l=o(r.a,a.a,!1,s,null,null);t.a=l.exports},function(e,t){},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"notification-widget"})},r=[],a={render:i,staticRenderFns:r};t.a=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=[{name:"file-alt",extensions:["txt"]},{name:"file-pdf",extensions:["pdf"]},{name:"file-word",extensions:["doc","docx"]},{name:"file-excel",extensions:["xls","xlsx"]},{name:"file-powerpoint",extensions:["ppt","pptx"]},{name:"file-code",extensions:["html","php","js","cs","java"]},{name:"file-video",extensions:["avi","mpg","mpeg","mp4","mov"]},{name:"file-audio",extensions:["mp3","wav","flac","ogg"]},{name:"file-archive",extensions:["zip","rar","7z","tar","gz","tgz"]}],o=function(){function e(){i(this,e)}return r(e,null,[{key:"getFaIconClass",value:function(e){var t="fa fa-fw fa-";if("dir"==e.type)return t+"folder";var n=a.find(function(t){return t.extensions.indexOf(e.extension)>=0});return t+=n?n.name:"file"}}]),e}();t.a=o},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mm",class:{"mm-fixed-height":e.options.height},style:e.options.height?"height:"+e.options.height:""},[n("div",{staticClass:"panel panel-default"},[n("div",{staticClass:"panel-body"},[n("notification-widget"),e._v(" "),e.options.showBreadcrumb?n("ol",{staticClass:"breadcrumb"},e._l(e.breadcrumb,function(t){return n("li",{key:t.path},[n("a",{attrs:{href:"#"},domProps:{innerHTML:e._s(t.label)},on:{click:function(n){n.preventDefault(),e.path=t.path}}})])}),0):e._e(),e._v(" "),n("div",{staticClass:"mm-content"},[e.api.options.uploadUrl?n("upload-widget",{key:"upload",ref:"upload",staticClass:"animated fadeIn",attrs:{path:e.path},on:{"upload-success":e.onUploadSuccess,"upload-error":e.onUploadError}}):e._e(),e._v(" "),n("medias-widget",{key:"medias",ref:"medias",staticClass:"animated fadeIn",attrs:{path:e.path,uploads:e.uploadsInPath}})],1)],1)])])},r=[],a={render:i,staticRenderFns:r};t.a=a},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(6),a=n.n(r),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=a.a.CancelToken,u=function(){function e(t){i(this,e),this.options=o({},this.constructor.defaultOptions,t),this.options.baseUrl&&(this.options.axiosOptions.baseURL=this.options.baseUrl),this.axios=a.a.create(this.options.axiosOptions)}return s(e,null,[{key:"defaultOptions",get:function(){return{baseUrl:null,listUrl:null,downloadUrl:null,deleteUrl:null,renameUrl:null,createFolderUrl:null,uploadUrl:null,beforeUpload:null,axiosOptions:{}}}}]),s(e,[{key:"list",value:function(e){var t=this.computeConfig({params:{path:e}});return this.axios.get(this.options.listUrl,t)}},{key:"upload",value:function(e,t,n){var i=this,r=this.computeConfig(t),a=l.source(),s={config:o({},r,{cancelToken:a.token}),url:this.options.uploadUrl},u=Promise.resolve();return this.options.beforeUpload instanceof Function&&(u=Promise.all([this.options.beforeUpload(s,e,n)]).then(function(e){return e[0]})),n.abort=function(){a.cancel()},u.then(function(){return i.axios.post(s.url,e,s.config).then(function(e){return i.options.afterUpload instanceof Function?i.options.afterUpload(e,s,n):e})})}},{key:"delete",value:function(e){var t=this.computeConfig({});return this.axios.delete(this.deleteUrl(e),t)}},{key:"rename",value:function(e,t){var n=this.computeConfig({});return this.axios.patch(this.renameUrl(e),{name:t},n)}},{key:"createFolderIn",value:function(e,t){var n=this.computeConfig({});return this.axios.post(this.createFolderUrl(e,t),{},n)}},{key:"computeConfig",value:function(e){if(!this.options.requestConfig)return e;var t=this.options.requestConfig;return t instanceof Function&&(t=t()),o({},e,t)}},{key:"downloadUrl",value:function(e){return this.options.downloadUrl&&this.options.downloadUrl+"?path="+e.path}},{key:"deleteUrl",value:function(e){return this.options.deleteUrl&&this.options.deleteUrl+"/"+e.path}},{key:"renameUrl",value:function(e){return this.options.renameUrl&&this.options.deleteUrl+"/"+e.path}},{key:"createFolderUrl",value:function(e,t){return this.options.createFolderUrl&&this.options.createFolderUrl+(e?"/"+e:"")+"/"+t}}]),e}();t.a=u},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=function(){function e(){i(this,e)}return r(e,null,[{key:"create",value:function(e,t){var n=t.selected;return n&&(Array.isArray(n)?n=n.map(function(e){return"string"==typeof e?{path:e}:e}):"string"==typeof n&&(n={path:n})),{state:{mm:e,options:t,path:t.basePath+t.path,selected:n},mutations:{setPath:function(e,n){e.path=t.basePath+n},resetSelected:function(e){e.selected=null},addSelected:function(e,t){if(e.options.multipleSelection){if(Array.isArray(e.selected)){if(e.selected.findIndex(function(e){return t.path&&e.path===t.path||t.uuid&&e.uuid===t.uuid})>-1)return}else e.selected=[];e.selected.push(t)}else e.selected=t;e.selected=JSON.parse(JSON.stringify(e.selected)),e.mm.onSelect({selected:e.selected})},removeSelected:function(e,t){if(e.options.multipleSelection){if(!Array.isArray(e.selected))return;var n=e.selected.findIndex(function(e){return t.path&&e.path===t.path||t.uuid&&e.uuid===t.uuid});n>-1&&e.selected.splice(n,1)}else e.seleted&&(t.uuid&&e.selected.uuid===t.uuid||t.path&&e.selected.path===t.path)&&(e.selected=null);e.selected=JSON.parse(JSON.stringify(e.selected)),e.mm.onSelect({selected:e.selected})},renameSelected:function(e,t){function n(e){e.path=r.path+e.path.substr(i.path.length);var t=e.path.substr(0,e.path.lastIndexOf("/")),n=t.lastIndexOf("/");e.dirname=-1!==n?t.substr(n+1):t,e.fileURL&&(e.fileURL=e.fileURL.replace("/"+i.path+"/","/"+r.path+"/")),e.thumb&&(e.thumb=e.thumb.replace("/"+i.path+"/","/"+r.path+"/"))}var i=t.file,r=t.newFile,a=!1;if(e.options.multipleSelection){if(!Array.isArray(e.selected))return;var o=e.selected.find(function(e){return e.path===i.path});o&&(Object.assign(o,r),a=!0),"dir"===i.type&&e.selected.filter(function(e){return 0===e.path.indexOf(i.path+"/")}).forEach(function(e){n(e),a=!0})}else e.selected&&e.selected.path===i.path&&(e.selected=r,a=!0),"dir"===i.type&&e.selected&&0===e.selected.path.indexOf(i.path+"/")&&(n(e.selected),a=!0);a&&e.mm.onSelect({selected:e.selected})},fileUploaded:function(e,t){function n(e){delete e.uploading,delete e.loaded,delete e.total,delete e.success,delete e.error,delete e.uploadPath,delete e.uuid,delete e.abort}if(e.options.multipleSelection){if(!Array.isArray(e.selected))return;var i=e.selected.find(function(e){return e.uuid===t.uuid});i&&(Object.assign(i,t),Object.assign(t,i),n(i),n(t))}else e.selected&&e.selected.uuid===t.uuid&&(e.selected=t,n(t))}},getters:{path:function(e){return e.path},selected:function(e,t){return function(){return e.selected}},isSelected:function(e,t){return function(t){if(e.options.multipleSelection){if(!Array.isArray(e.selected))return!1;return e.selected.findIndex(function(e){return t.path&&e.path===t.path||t.uuid&&e.uuid===t.uuid})>-1}return e.selected&&(t.path&&e.selected.path===t.path||t.uuid&&e.selected.uuid===t.uuid)||!1}},nbSelected:function(e,t){return Array.isArray(e.selected)?e.selected.length:e.selected?1:0}}}}}]),e}();t.a=a},function(e,t,n){"use strict";var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"media-manager",attrs:{id:e.id}},[n("div",{ref:"mediaManager"})])},r=[],a={render:i,staticRenderFns:r};t.a=a}])});
//# sourceMappingURL=mm.min.js.map